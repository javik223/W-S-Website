function ajaxCall(){function e(e){console.log(e)}var t,n=this,o=new XMLHttpRequest,r,a={url:"",method:"get",error:"",progress:"",complete:""};return"string"==typeof arguments[0]?n.options.url=arguments[0]:"object"==typeof arguments[0]&&extend(arguments[0],a),o.addEventListener("error",function(){"function"==typeof a.error&&a.error.call(n)}),o.addEventListener("progress",function(e){var t="";e.lengthComputable&&(t=e.loaded/e.total*100),"function"==typeof a.progress&&a.progress.call(n,t)}),o.addEventListener("load",function(){"function"==typeof a.complete&&a.complete.call(n,this.responseText)}),o.open(a.method,a.url,!0),o.send(),$elem={response:t,success:function(e){"function"==typeof e&&e.apply(this,[this.response])}},$elem}!function(e,t){function n(t,n,a,l){t[r](o+n,"wheel"==i?a:function(t){!t&&(t=e.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==i?(n.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-1/40*t.wheelDeltaX)):n.deltaY=t.detail,a(n)},l||!1)}var o="",r,a,i;e.addEventListener?r="addEventListener":(r="attachEvent",o="on"),i="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,t,o){n(e,i,t,o),"DOMMouseScroll"==i&&n(e,"MozMousePixelScroll",t,o)}}(window,document);var extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},hasClass=function(e,t){return e.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},removeClass=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},addClass=function(e,t){hasClass(e,t)||(e.className+=" "+t)},mouseWheel=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";$(function(){function e(e){var t=k.offsetWidth;"left"==e&&f.to(k,1,{scrollLeft:"-="+t,ease:Back.easeOut}),"right"==e&&f.to(k,1,{scrollLeft:"+="+t,ease:Back.easeOut})}function t(){var e=window.innerHeight,t=window.innerWidth,n=$(".jshomeHero"),o=$(".jsFeatured"),r=document.querySelector(".jsFeaturedHeader").clientHeight,a=document.querySelector(".jsHeader").clientHeight;f.set(o,{width:t,height:e}),f.set(n,{width:t,height:e-r-a})}function n(e){o(this.getAttribute("href")),f.set(x,{className:"-=active"}),f.set(this,{className:"+=active"}),e.preventDefault()}function o(e){myajax=new ajaxCall({url:e,progress:function(e){s()},complete:function(e){c(),response=r(e),i(response.raw)?(L.setAttribute("href",i(response.raw)),f.to(L.parentNode,1,{autoAlpha:1})):f.to(L.parentNode,1,{autoAlpha:0}),N.innerHTML="",N.appendChild(response.docInsert),a(response.elems)}})}function r(e){var t=document.createElement("div"),n={};t.innerHTML=e,n.title=t.querySelector("title").innerHTML,n.works=t.querySelector(".works_collection"),docInsert=document.createDocumentFragment();for(var o=[].slice.call(n.works.children),r=0;r<o.length;r++)elem=o[r],docInsert.appendChild(elem);return response={title:n.title,elems:o,docInsert:docInsert,raw:t},response}function a(e){pckry.appended(e);var t=new ImagesLoaded(".works_collection");t.done(function(){pckry.layout(),setTimeout(function(){pckry.layout()},100),l(e)})}function i(e){var t;return e.querySelector(".loadMoreLink")&&(t=e.querySelector(".loadMoreLink").getAttribute("href")),t}function l(e){(new TimelineMax).staggerFromTo(e,1,{y:"50%",opacity:0,perspective:"100px",rotationX:"6deg",force3D:!0,scale:.6},{y:"0%",perspective:"0px",transformOrigin:"top 100%",opacity:1,scale:1,rotationX:"0deg",force3D:!0,ease:Sine.easeOut},.6)}function s(){(new TimelineMax).to(M,1,{autoAlpha:1})}function c(){(new TimelineMax).to(M,1,{autoAlpha:0})}function u(){try{var e=new TimelineMax({yoyo:!0,repeat:1e3}),t=Snap("#love_container");Snap.load("/assets/img/love.svg",function(e){t&&t.append(e)}),e.to("#love",1,{className:"+=love"})}catch(n){console.log(n)}}function d(){function e(){r.items=o.querySelectorAll(".featured_item"),TweenLite.set(".featured_projects",{perspective:500}),r.itemsCount=0|r.items.length,r.curElem=r.items[0],r.nextElem=r.curElem.nextElementSibling?r.curElem.nextElementSibling:r.items[0],r.prevElem=r.curElem.previousElementSibling?r.curElem.previousElementSibling:r.items[r.itemsCount-1],r.nextNav=o.querySelector(".featured_nav_right"),r.prevNav=o.querySelector(".featured_nav_left"),r.autoAnimate=!0,t()}function t(){for(var e=document.createElement("div"),t,a=0;a<r.itemsCount;a++)t=document.createElement("span"),t.setAttribute("data-index",String(a)),e.appendChild(t),t.addEventListener("click",n);e.setAttribute("class","featuredThumbs"),o.querySelector(".featured").appendChild(e)}function n(e){for(var t=this.getAttribute("data-index"),n=document.body.querySelectorAll(".featuredThumbs span"),o=0;o<n.length;o++)removeClass(n[o],"active");r.to(r.items[t]),addClass(this,"active"),console.log(t)}var o=document.body,r=this;e(),this.nextNav.addEventListener("click",function(){r.next()}),this.prevNav.addEventListener("click",function(){r.prev()}),this.loadBGImages=function(){for(var e=0;e<r.itemsCount;e++){var t=r.items[e];h=t.getAttribute("data-bg"),TweenLite.set(t,{backgroundImage:"url('"+h+"')",backgroundSize:"cover !important",backgroundPosition:"top 40%"}),TweenLite.set(t,{zIndex:r.itemsCount-e})}},this.animateCur=function(){console.log(r.autoAnimate),r.getPrevNext(),r.timer&&clearTimeout(r.timer);var e=new TimelineMax,t=r.curElem,n=t.querySelector(".heading"),o=t.querySelector("h3");e.timeScale(1),e.set(r.items,{zIndex:0}).set(r.nextElem,{zIndex:98}).set(t,{zIndex:100}).fromTo(n,1,{yPercent:"100%",autoAlpha:.2,force3D:!0,rotationX:"-6deg",transformOrigin:"bottom left"},{yPercent:"0%",rotationX:"0deg",autoAlpha:1,ease:Sine.easeOut}).fromTo(o,2,{yPercent:"100%",autoAlpha:0,force3D:!0,transformOrigin:"top center"},{yPercent:"0%",autoAlpha:1,ease:Quart.easeOut},"-=0.3").to(t,1.3,{yPercent:"-100%",force3D:!0,delay:4,scale:1.2,perspective:"500px",transformOrigin:"center center",rotationX:"7.5deg",ease:Power4.easeIn}).call(function(){TweenLite.set([n,o],{clearProps:"all"}),TweenLite.set(t,{autoAlpha:1,yPercent:0,force3D:!0,transformOrigin:"center center",rotationX:0,scale:1}),TweenLite.set(t,{zIndex:0}),e.clear(),r.autoAnimate?r.curElem=r.nextElem:r.autoAnimate=!0,r.timer=setInterval(r.animateCur,1e3)},[r,e,t,n,o]),r.s=e},this.getPrevNext=function(){r.nextElem=r.curElem.nextElementSibling?r.curElem.nextElementSibling:r.items[0],r.prevElem=r.curElem.previousElementSibling?r.curElem.previousElementSibling:r.items[r.itemsCount-1]},this.animate=function(){r.timer=setInterval(r.animateCur,10)},this.next=function(){r.to(r.nextElem)},this.prev=function(){r.to(r.prevElem)},r.to=function(e){r.autoAnimate=!1,r.s.clear(),curElemHeader=r.curElem.querySelector(".heading"),curElemSubHeader=r.curElem.querySelector("h3"),TweenLite.to(curElemHeader,{autoAlpha:0}),TweenLite.to(curElemSubHeader,{autoAlpha:0}),TweenLite.set(e,{zIndex:101,autoAlpha:0}),TweenLite.to(e,2,{autoAlpha:1,yPercent:"0%",scale:1}),r.curElem=e,r.getPrevNext(),r.animateCur()}}function m(e){var t=document.body,n=t.offsetHeight,o=0;_===!1&&(featuredHH=document.querySelector(".jsFeaturedHeader").clientHeight,_=!0),"down"==e&&(TweenMax.to("body",1,{force3D:!0,scrollTop:"+="+(n-featuredHH),ease:Power4.easeOut}),featuredHH=0),"up"==e&&TweenMax.to("body",1,{force3D:!0,scrollTop:"-="+(n-featuredHH),ease:Power4.easeOut})}var f=new TimelineMax,p=document.body,v=$(".menu"),g=$(".works_collection"),w=$(".nav"),y=$("a",w),E=!1,S=p.querySelector(".loadMore"),L=S?S.parentElement:"",b=p.querySelector(".works_group_nav"),x=b?b.querySelectorAll("a"):"",k=p.querySelector(".works_group"),A=p.querySelectorAll(".works_group ul li"),T=p.querySelector(".works_container"),N=p.querySelector(".works_collection"),q=p.querySelectorAll(".item"),M=p.querySelector(".loader_wrapper"),C=p.querySelector(".jsWorksCatNavLeft"),H=p.querySelector(".jsWorksCatNavRight"),D="",_=!1,I={navLeft:C,navRight:H,navLeftVisible:!1,navRightVisible:!1,showNavLeft:function(){this.navLeftVisible===!1&&(f.to(this.navLeft,.5,{autoAlpha:1}),this.navLeftVisible=!0)},showNavRight:function(){this.navRightVisible===!1&&(f.to(this.navRight,.5,{autoAlpha:1}),this.navRightVisible=!0)},hideNavLeft:function(){this.navLeftVisible&&(f.to(this.navLeft,.5,{autoAlpha:0}),this.navLeftVisible=!1)},hideNavRight:function(){this.navRightVisible&&(f.to(this.navRight,.5,{autoAlpha:0}),this.navRightVisible=!1)}};try{C.addEventListener("click",function(){e("left")}),H.addEventListener("click",function(){e("right")})}catch(j){}if(document.querySelector(".jsFeaturedHeader")&&(t(),window.addEventListener("resize",t)),b){var O=0;!function X(){for(R=0;R<A.length;R++)O+=A[R].offsetWidth;b.offsetWidth<O&&(f.set(".works_group_nav ul",{width:O+20}),I.showNavRight())}()}k&&k.addEventListener("scroll",function(){var e=O-this.clientWidth,t=this.scrollLeft;t>0&&!I.navLeftVisible?I.showNavLeft():0===t&&I.hideNavLeft(),t>=e+20&&I.navRightVisible?I.hideNavRight():I.navRightVisible||I.showNavRight()});var P=new TimelineMax({smoothChildTiming:!0,yoyo:!0,paused:!0});P.to(".nav",.6,{className:"+=show",force3D:!0,ease:Back.easeOut}).staggerFrom(".nav a",.5,{autoAlpha:0,x:"20%"},.1).to(v,.6,{className:"+=active",force3D:!0},-.2),v.on("click",function(){E===!1?(P.timeScale(1),P.play()):(P.timeScale(2),P.reverse()),E=!E}),g.length>0&&Modernizr.load([{load:"/assets/js/imagesloaded.pkgd.min.js"},{load:"/assets/js/packery.pkgd.min.js",callback:function(){pckry=new Packery(".works_collection",{itemSelector:".item",isOriginTop:!0,rowHeight:100,isResizeBound:!0,isInitLayout:!1,transitionDuration:"0s"});var e=new ImagesLoaded(".works_collection");e.done(function(){pckry.layout(),l(q)})}}]);try{p.addEventListener("click",function(e){if("loadMore"==e.target.className){S=p.querySelector(".loadMore"),L=S?S.parentElement:"";var t=L.getAttribute("href"),n=new ajaxCall({url:t,progress:function(e){s()},complete:function(e){c(),respnose=r(e),i(response.raw)?(L.setAttribute("href",i(response.raw)),f.to(L.parentNode,1,{autoAlpha:1})):f.to(L.parentNode,1,{autoAlpha:0}),N=document.querySelector(".works_collection"),N.appendChild(response.docInsert),a(response.elems)}});e.preventDefault()}})}catch(j){console.log(j)}if(b)for(var R=0;R<x.length;R++)x[R].addEventListener("click",n,!1);try{u()}catch(j){console.log(j)}var V=0;if(addWheelListener(document.body,function(e){(new Date).getTime()-V>1e3&&(m(e.deltaY>0?"down":"up"),V=(new Date).getTime()),console.log(D),e.preventDefault()}),document.querySelector(".jsFeaturedHeader")){var z=new d;z.loadBGImages(),z.animate()}});